import{_ as e}from"./PageWrapper.871c2533.js";import{f as s,g as r}from"./useForm.846cb87f.js";import{f as t,aJ as o,P as a}from"./index.55b83891.js";import{r as i}from"./user.4bf0b4fa.js";import{j as n,K as d,o as l,m as c,P as m,n as p,X as f}from"./vendor.0af35baf.js";import"./usePageContext.876c4a9a.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.28436c92.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.a6f068af.js";import"./useModal.dcdf213c.js";import"./useWindowSizeFn.2da1ca2c.js";/* empty css              */import"./download.95bd8f97.js";import"./StrengthMeter.d536ccd9.js";const u=[{field:"passwordOld",label:"当前密码",component:"InputPassword",required:!0},{field:"passwordNew",label:"新密码",component:"StrengthMeter",componentProps:{placeholder:"新密码"},rules:[{required:!0,message:"请输入新密码"}]},{field:"confirmPassword",label:"确认密码",component:"InputPassword",dynamicRules:({values:e})=>[{required:!0,validator:(s,r)=>r?r!==e.passwordNew?Promise.reject("两次输入的密码不一致!"):Promise.resolve():Promise.reject("不能为空")}]}];var j=n({name:"ChangePassword",components:{BasicForm:s,PageWrapper:e},setup(){const[e,{validate:s,resetFields:n}]=r({size:"large",labelWidth:100,showActionButtonGroup:!1,schemas:u});return{register:e,resetFields:n,handleSubmit:function(){return e=this,r=null,n=function*(){try{const e=t(),r=yield s(),{username:n}=e.getUserInfo||{},{passwordOld:d,passwordNew:l}=r,c={username:n,pwd:d,new_pwd:l};(yield i(c))&&o.push(a.BASE_LOGIN)}catch(e){}},new Promise(((s,t)=>{var o=e=>{try{i(n.next(e))}catch(s){t(s)}},a=e=>{try{i(n.throw(e))}catch(s){t(s)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,a);i((n=n.apply(e,r)).next())}));var e,r,n}}}});const w={class:"py-8 bg-white flex flex-col justify-center items-center"},b={class:"flex justify-center"},x=f(" 重置 "),h=f(" 确认 ");j.render=function(e,s,r,t,o,a){const i=d("BasicForm"),n=d("a-button"),f=d("PageWrapper");return l(),c(f,{title:"修改当前用户密码",content:"修改成功后会自动退出当前登录！"},{default:m((()=>[p("div",w,[p(i,{onRegister:e.register},null,8,["onRegister"]),p("div",b,[p(n,{onClick:e.resetFields},{default:m((()=>[x])),_:1},8,["onClick"]),p(n,{class:"ml-4",type:"primary",onClick:e.handleSubmit},{default:m((()=>[h])),_:1},8,["onClick"])])])])),_:1})};export default j;
