var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,l=(e,t,o)=>new Promise(((a,r)=>{var l=e=>{try{s(o.next(e))}catch(t){r(t)}},n=e=>{try{s(o.throw(e))}catch(t){r(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);s((o=o.apply(e,t)).next())}));import{_ as n,b as s}from"./useModal.e6ca911d.js";import{h as i,i as d}from"./useForm.1bb3cede.js";import{T as p}from"./index.1e3f89c9.js";import{c6 as c,e as u,v as m,A as f,dD as b,k as g,dE as h,dF as v,r as y,o as I,m as P,G as w,n as x,q as j}from"./index.4d27a91d.js";const F=[{title:"部门名称",dataIndex:"deptName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=1==~~e.status,o=t?"启用":"停用";return c(p,{color:t?"green":"red"},(()=>o))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],M=[{field:"deptName",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]},colProps:{span:8}}],N=[{field:"id",label:"ID",component:"InputNumber",show:!1},{field:"pid",label:"pid",component:"InputNumber",show:!1},{field:"deptName",label:"部门名称",component:"Input",required:!0},{field:"parentDept",label:"上级部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"1",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var O=u({name:"DeptModal",components:{BasicModal:n,BasicForm:i},emits:["success","register"],setup(e,{emit:n}){const i=m(!0),[p,{resetFields:c,setFieldsValue:u,updateSchema:y,validate:I}]=d({labelWidth:100,schemas:N,showActionButtonGroup:!1}),[P,{setModalProps:w,closeModal:x}]=s((e=>l(this,null,(function*(){c(),w({confirmLoading:!1}),i.value=!!(null==e?void 0:e.isUpdate),f(i)&&u(((e,l)=>{for(var n in l||(l={}))t.call(l,n)&&r(e,n,l[n]);if(o)for(var n of o(l))a.call(l,n)&&r(e,n,l[n]);return e})({},e.record));const l=(yield b()).items;y({field:"parentDept",componentProps:{treeData:l}})}))));return{registerModal:P,registerForm:p,getTitle:g((()=>f(i)?"编辑部门":"新增部门")),handleSubmit:function(){return l(this,null,(function*(){try{const t=yield I();if(w({confirmLoading:!0}),0!=t.id&&null!=typeof t.id&&t.id)e=yield v(t);else var e=yield h(t);e&&(x(),n("success"))}finally{w({confirmLoading:!1})}}))}}}});O.render=function(e,t,o,a,r,l){const n=y("BasicForm"),s=y("BasicModal");return I(),P(s,j(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:w((()=>[x(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var S=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:O});export{S as D,O as _,F as c,M as s};
