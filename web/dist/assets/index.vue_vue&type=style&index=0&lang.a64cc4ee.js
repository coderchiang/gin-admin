var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,c=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,l)=>{for(var a in l||(l={}))t.call(l,a)&&c(e,a,l[a]);if(n)for(var a of n(l))r.call(l,a)&&c(e,a,l[a]);return e},a=(e,t,n)=>new Promise(((r,c)=>{var l=e=>{try{o(n.next(e))}catch(t){c(t)}},a=e=>{try{o(n.throw(e))}catch(t){c(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,a);o((n=n.apply(e,t)).next())}));import{n as o,q as s,I as i,e as d,ao as u,dW as h,S as f,Y as p,Z as y,an as b,ai as v,W as m,ac as g,a0 as k,X as O,Q as K,bX as x,aQ as S,M as w,c6 as j,aW as E,cX as A,ci as C,aX as L,s as _,au as P,j as T,k as N,be as D,r as I,o as $,m as B,az as M,L as H,G as U,H as R,p as F,b7 as X,J as z,ay as V,A as Y,ab as q,dX as W,v as Q,w as Z,V as G,cY as J,af as ee,dY as te,dZ as ne,as as re,x as ce,g as le,C as ae,cb as oe,av as se,N as ie,aw as de,dA as ue,E as he,F as fe,bo as pe,d_ as ye,d$ as be,cf as ve,bb as me}from"./index.c68bc564.js";import{F as ge,T as ke,b as Oe,e as Ke,f as xe}from"./Tree.885e3dd6.js";import{C as Se,u as we}from"./useExpose.6be3b34e.js";import{D as je}from"./index.d0c7b499.js";import{g as Ee}from"./get.402f11ff.js";var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ce(e,t,n[t])}))}return e}({},e,t.attrs);return o(i,s(n,{icon:Ae}),null)};Le.displayName="MinusSquareOutlined",Le.inheritAttrs=!1;var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}({},e,t.attrs);return o(i,s(n,{icon:_e}),null)};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Te.displayName="PlusSquareOutlined",Te.inheritAttrs=!1;var Be=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n},Me=ke.TreeNode;function He(){return{showLine:f.looseBool,multiple:f.looseBool,autoExpandParent:f.looseBool,checkStrictly:f.looseBool,checkable:f.looseBool,disabled:f.looseBool,defaultExpandAll:f.looseBool,defaultExpandParent:f.looseBool,defaultExpandedKeys:f.arrayOf(f.oneOfType([f.string,f.number])),expandedKeys:f.arrayOf(f.oneOfType([f.string,f.number])),checkedKeys:f.oneOfType([f.arrayOf(f.oneOfType([f.string,f.number])),f.shape({checked:f.arrayOf(f.oneOfType([f.string,f.number])),halfChecked:f.arrayOf(f.oneOfType([f.string,f.number]))}).loose]),defaultCheckedKeys:f.arrayOf(f.oneOfType([f.string,f.number])),selectedKeys:f.arrayOf(f.oneOfType([f.string,f.number])),defaultSelectedKeys:f.arrayOf(f.oneOfType([f.string,f.number])),selectable:f.looseBool,filterAntTreeNode:f.func,loadData:f.func,loadedKeys:f.arrayOf(f.oneOfType([f.string,f.number])),draggable:f.looseBool,showIcon:f.looseBool,icon:f.func,switcherIcon:f.any,prefixCls:f.string,filterTreeNode:f.func,openAnimation:f.any,treeData:{type:Array},replaceFields:f.object,blockNode:f.looseBool,onExpand:f.func,onCheck:f.func,onSelect:f.func,onClick:f.func,onDoubleclick:f.func,onDblclick:f.func,"onUpdate:selectedKeys":f.func,"onUpdate:checkedKeys":f.func,"onUpdate:expandedKeys":f.func}}var Ue=d({name:"ATree",inheritAttrs:!1,props:u(He(),{checkable:!1,showIcon:!1,openAnimation:$e($e({},h),{appear:null}),blockNode:!1}),setup:function(){return{tree:null,configProvider:p("configProvider",y)}},TreeNode:Me,methods:{renderSwitcherIcon:function(e,t,n){var r=n.isLeaf,c=n.loading,l=n.expanded,a=this.$props.showLine;if(c)return o(b,{class:"".concat(e,"-switcher-loading-icon")},null);if(r)return a?o(ge,{class:"".concat(e,"-switcher-line-icon")},null):null;var s="".concat(e,"-switcher-icon");return t?v(t,{class:s}):a?o(l?Le:Te,{class:"".concat(e,"-switcher-line-icon")},null):o(Se,{class:s},null)},updateTreeData:function(e){var t=this,n=this.$slots,r=$e($e({},{children:"children",title:"title",key:"key"}),this.$props.replaceFields);return e.map((function(e){var c=e[r.key],l=e[r.children],a=e.slots,o=void 0===a?{}:a,s=e.class,i=e.style,d=Be(e,["slots","class","style"]),u=$e($e({},d),{icon:n[o.icon]||d.icon,switcherIcon:n[o.switcherIcon]||d.switcherIcon,title:n[o.title]||n.title||d[r.title],dataRef:e,key:c,class:s,style:i});return l?$e($e({},u),{children:t.updateTreeData(l)}):u}))},setTreeRef:function(e){this.tree=e},handleCheck:function(e,t){this.$emit("update:checkedKeys",e),this.$emit("check",e,t)},handleExpand:function(e,t){this.$emit("update:expandedKeys",e),this.$emit("expand",e,t)},handleSelect:function(e,t){this.$emit("update:selectedKeys",e),this.$emit("select",e,t)}},render:function(){var e,t=this,n=m(this),r=n.prefixCls,c=n.showIcon,l=n.treeNodes,a=n.blockNode,s=(0,this.configProvider.getPrefixCls)("tree",r),i=g(this,"switcherIcon"),d=n.checkable,u=n.treeData||l;u&&(u=this.updateTreeData(u));var h=this.$attrs,f=h.class,p=Be(h,["class"]),y=$e($e($e($e({},n),{prefixCls:s,checkable:d?o("span",{class:"".concat(s,"-checkbox-inner")},null):d,children:k(this),switcherIcon:function(e){return t.renderSwitcherIcon(s,i,e)},ref:this.setTreeRef}),p),{class:O(f,(e={},Ie(e,"".concat(s,"-icon-hide"),!c),Ie(e,"".concat(s,"-block-node"),a),e)),onCheck:this.handleCheck,onExpand:this.handleExpand,onSelect:this.handleSelect});return u&&(y.treeData=u),o(ke,De(De({},y),{},{__propsSymbol__:[]}),null)}}),Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fe(e,t,n[t])}))}return e}({},e,t.attrs);return o(i,s(n,{icon:Re}),null)};Xe.displayName="FolderOpenOutlined",Xe.inheritAttrs=!1;var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye,qe,We=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ve(e,t,n[t])}))}return e}({},e,t.attrs);return o(i,s(n,{icon:ze}),null)};function Qe(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){(Ke(e)||[]).forEach((function(e){var n=e.key,r=k(e);!1!==t(n,e)&&Ge(r,t)}))}function Je(e,t,n,r){var c=[],l=Ye.None;if(n&&n===r)return[n];if(!n||!r)return[];return Ge(e,(function(e){if(l===Ye.End)return!1;if(function(e){return e===n||e===r}(e)){if(c.push(e),l===Ye.None)l=Ye.Start;else if(l===Ye.Start)return l=Ye.End,!1}else l===Ye.Start&&c.push(e);return-1!==t.indexOf(e)})),c}function et(e,t){var n=Qe(t),r=[];return Ge(e,(function(e,t){var c=n.indexOf(e);return-1!==c&&(r.push(t),n.splice(c,1)),!!n.length})),r}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=t(e||[]).forEach((function(e){n.push(e[l]),e[o]&&(n=[].concat(Qe(n),Qe(tt(e[o],t))))})),c=r.key,l=void 0===c?"key":c,a=r.children,o=void 0===a?"children":a;return n}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}We.displayName="FolderOutlined",We.inheritAttrs=!1,(qe=Ye||(Ye={}))[qe.None=0]="None",qe[qe.Start=1]="Start",qe[qe.End=2]="End";var ot=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n};function st(e){var t=e.isLeaf,n=e.expanded;return o(t?ge:n?Xe:We,null,null)}var it=d({name:"ADirectoryTree",mixins:[K],inheritAttrs:!1,props:u(at(at({},He()),{expandAction:f.oneOf([!1,"click","doubleclick","dblclick"])}),{showIcon:!0,expandAction:"click"}),setup:function(){return{children:null,onDebounceExpand:null,tree:null,lastSelectedKey:"",cachedSelectedKeys:[],configProvider:p("configProvider",y)}},data:function(){var e=m(this),t=e.defaultExpandAll,n=e.defaultExpandParent,r=e.expandedKeys,c=e.defaultExpandedKeys,l=k(this),a=Oe(l).keyEntities,o={};return o._selectedKeys=e.selectedKeys||e.defaultSelectedKeys||[],t?e.treeData?o._expandedKeys=tt(e.treeData,e.replaceFields):o._expandedKeys=function(e){return Qe(Oe(e).keyEntities.keys())}(l):o._expandedKeys=n?xe(r||c,a):r||c,at({_selectedKeys:[],_expandedKeys:[]},o)},watch:{expandedKeys:function(e){this.setState({_expandedKeys:e})},selectedKeys:function(e){this.setState({_selectedKeys:e})}},created:function(){this.onDebounceExpand=x(this.expandFolderNode,200,{leading:!0})},methods:{handleExpand:function(e,t){this.setUncontrolledState({_expandedKeys:e}),this.$emit("update:expandedKeys",e),this.$emit("expand",e,t)},handleClick:function(e,t){"click"===this.$props.expandAction&&this.onDebounceExpand(e,t),this.$emit("click",e,t)},handleDoubleClick:function(e,t){var n=this.$props.expandAction;"dblclick"!==n&&"doubleclick"!==n||this.onDebounceExpand(e,t),this.$emit("doubleclick",e,t),this.$emit("dblclick",e,t)},hanldeSelect:function(e,t){var n,r=this.$props.multiple,c=this.children||[],l=this.$data._expandedKeys,a=void 0===l?[]:l,o=t.node,s=t.nativeEvent,i=o.eventKey,d=void 0===i?"":i,u={},h=at(at({},t),{selected:!0}),f=s.ctrlKey||s.metaKey,p=s.shiftKey;r&&f?(n=e,this.lastSelectedKey=d,this.cachedSelectedKeys=n,h.selectedNodes=et(c,n)):r&&p?(n=Array.from(new Set([].concat(ct(this.cachedSelectedKeys||[]),ct(Je(c,a,d,this.lastSelectedKey))))),h.selectedNodes=et(c,n)):(n=[d],this.lastSelectedKey=d,this.cachedSelectedKeys=n,h.selectedNodes=[t.node]),u._selectedKeys=n,this.$emit("update:selectedKeys",n),this.$emit("select",n,h),this.setUncontrolledState(u)},setTreeRef:function(e){this.tree=e},expandFolderNode:function(e,t){t.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||this.tree.tree&&this.tree.tree.onNodeExpand(e,t)},setUncontrolledState:function(e){var t=S(e,Object.keys(m(this)).map((function(e){return"_".concat(e)})));Object.keys(t).length&&this.setState(t)},handleCheck:function(e,t){this.$emit("update:checkedKeys",e),this.$emit("check",e,t)}},render:function(){var e=this;this.children=k(this);var t=m(this),n=t.prefixCls,r=ot(t,["prefixCls"]),c=(0,this.configProvider.getPrefixCls)("tree",n),l=this.$data,a=l._expandedKeys,s=l._selectedKeys,i=this.$attrs,d=i.class,u=ot(i,["class"]),h=O("".concat(c,"-directory"),d),f=at(at(at({icon:st},u),S(r,["onUpdate:selectedKeys","onUpdate:checkedKeys","onUpdate:expandedKeys"])),{prefixCls:c,expandedKeys:a,selectedKeys:s,switcherIcon:g(this,"switcherIcon"),ref:this.setTreeRef,class:h,onSelect:this.hanldeSelect,onClick:this.handleClick,onDblclick:this.handleDoubleClick,onExpand:this.handleExpand,onCheck:this.handleCheck});return o(Ue,f,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({default:function(){return[e.children]}},S(this.$slots,["default"])))}});Ue.TreeNode.name="ATreeNode",Ue.DirectoryTree=it,Ue.install=function(e){return e.component(Ue.name,Ue),e.component(Ue.TreeNode.name,Ue.TreeNode),e.component(it.name,it),e};const dt=({icon:e})=>e?w(e)?j(E,{icon:e,class:"mr-1"}):E:null;var ut,ht;(ht=ut||(ut={}))[ht.SELECT_ALL=0]="SELECT_ALL",ht[ht.UN_SELECT_ALL=1]="UN_SELECT_ALL",ht[ht.EXPAND_ALL=2]="EXPAND_ALL",ht[ht.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",ht[ht.CHECK_STRICTLY=4]="CHECK_STRICTLY",ht[ht.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY";var ft=d({name:"BasicTreeHeader",components:{BasicTitle:A,Icon:E,Dropdown:C,Menu:L,MenuItem:L.Item,MenuDivider:L.Divider,InputSearch:_.Search},props:{helpMessage:{type:[String,Array],default:""},title:P.string,toolbar:P.bool,checkable:P.bool,search:P.bool,checkAll:P.func,expandAll:P.func},emits:["strictly-change","search"],setup(e,{emit:t}){const{t:n}=T(),r=N((()=>{const{checkable:t}=e,r=[{label:n("component.tree.expandAll"),value:ut.EXPAND_ALL},{label:n("component.tree.unExpandAll"),value:ut.UN_EXPAND_ALL,divider:t}];return t?[{label:n("component.tree.selectAll"),value:ut.SELECT_ALL},{label:n("component.tree.unSelectAll"),value:ut.UN_SELECT_ALL,divider:t},...r,{label:n("component.tree.checkStrictly"),value:ut.CHECK_STRICTLY},{label:n("component.tree.checkUnStrictly"),value:ut.CHECK_UN_STRICTLY}]:r}));const[c]=D((function(e){t("search",e)}),200);return{t:n,toolbarList:r,handleMenuClick:function(n){var r,c,l,a;const{key:o}=n;switch(o){case ut.SELECT_ALL:null==(r=e.checkAll)||r.call(e,!0);break;case ut.UN_SELECT_ALL:null==(c=e.checkAll)||c.call(e,!1);break;case ut.EXPAND_ALL:null==(l=e.expandAll)||l.call(e,!0);break;case ut.UN_EXPAND_ALL:null==(a=e.expandAll)||a.call(e,!1);break;case ut.CHECK_STRICTLY:t("strictly-change",!1);break;case ut.CHECK_UN_STRICTLY:t("strictly-change",!0)}},handleSearch:function(e){c(e.target.value)}}}});const pt={class:"flex px-2 py-1.5 items-center border-b-1"},yt={key:2,class:"flex flex-1 justify-end items-center cursor-pointer"},bt={key:0,class:"mr-1 w-2/3"};ft.render=function(e,t,n,r,c,l){const a=I("BasicTitle"),s=I("InputSearch"),i=I("Icon"),d=I("MenuItem"),u=I("MenuDivider"),h=I("Menu"),f=I("Dropdown");return $(),B("div",pt,[e.$slots.headerTitle?M(e.$slots,"headerTitle",{key:0}):H("",!0),!e.$slots.headerTitle&&e.title?($(),B(a,{key:1,helpMessage:e.helpMessage},{default:U((()=>[R(F(e.title),1)])),_:1},8,["helpMessage"])):H("",!0),e.search||e.toolbar?($(),B("div",yt,[e.search?($(),B("div",bt,[o(s,{placeholder:e.t("common.searchText"),size:"small",allowClear:"",onChange:e.handleSearch},null,8,["placeholder","onChange"])])):H("",!0),e.toolbar?($(),B(f,{key:1,onClick:t[1]||(t[1]=X((()=>{}),["prevent"]))},{overlay:U((()=>[o(h,{onClick:e.handleMenuClick},{default:U((()=>[($(!0),B(z,null,V(e.toolbarList,(e=>($(),B(z,{key:e.value},[o(d,{key:e.value},{default:U((()=>[R(F(e.label),1)])),_:2},1040),e.divider?($(),B(u,{key:0})):H("",!0)],64)))),128))])),_:1},8,["onClick"])])),default:U((()=>[o(i,{icon:"ion:ellipsis-vertical"})])),_:1})):H("",!0)])):H("",!0)])};const vt={width:P.number.def(156),customEvent:{type:Object,default:null},styles:P.style,showIcon:P.bool.def(!0),axis:{type:Object,default:()=>({x:0,y:0})},items:{type:Array,default:()=>[]}};const mt=e=>{const{item:t}=e;return o("span",{style:"display: inline-block; width: 100%;",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&o(E,{class:"mr-2",icon:t.icon},null),o("span",null,[t.label])])};var gt=d({name:"ContextMenu",props:vt,setup(e){const t=Q(null),n=Q(!1),r=N((()=>{const{axis:t,items:n,styles:r,width:c}=e,{x:a,y:o}=t||{x:0,y:0},s=40*(n||[]).length,i=c,d=document.body,u=d.clientWidth<a+i?a-i:a,h=d.clientHeight<o+s?o-s:o;return l(l({},r),{width:`${c}px`,left:`${u+1}px`,top:`${h+1}px`})}));function c(e,t){const{handler:r,disabled:c}=e;c||(n.value=!1,null==t||t.stopPropagation(),null==t||t.preventDefault(),null==r||r())}function a(t){return t.map((t=>{const{disabled:r,label:l,children:s,divider:i=!1}=t,d=i?o(je,{key:`d-${l}`},null):null;return s&&0!==s.length?Y(n)?o(L.SubMenu,{key:l,disabled:r,popupClassName:"context-menu__popup"},{title:()=>o(mt,{showIcon:e.showIcon,item:t,handler:c},null),default:()=>a(s)}):null:o(z,null,[o(L.Item,{disabled:r,class:"context-menu__item",key:l},{default:()=>[o(mt,{showIcon:e.showIcon,item:t,handler:c},null)]}),d])}))}return Z((()=>{G((()=>n.value=!0))})),J((()=>{const e=Y(t);e&&document.body.removeChild(e)})),()=>{let c;const{items:l}=e;return Y(n)?o(L,{inlineIndent:12,mode:"vertical",class:"context-menu",ref:t,style:Y(r)},"function"==typeof(s=c=a(l))||"[object Object]"===Object.prototype.toString.call(s)&&!ee(s)?c:{default:()=>[c]}):null;var s}}});const kt={domList:[],resolve:()=>{}},Ot=function(e){const{event:t}=e||{};if(t&&(null==t||t.preventDefault()),te)return new Promise((n=>{const r=document.body,c=document.createElement("div"),l={};e.styles&&(l.styles=e.styles),e.items&&(l.items=e.items),e.event&&(l.customEvent=t,l.axis={x:t.clientX,y:t.clientY});const a=o(gt,l);ne(a,c);const s=function(){kt.resolve("")};kt.domList.push(c);const i=function(){kt.domList.forEach((e=>{try{e&&r.removeChild(e)}catch(t){}})),r.removeEventListener("click",s),r.removeEventListener("scroll",s)};kt.resolve=function(...e){i(),n(e[0])},i(),r.appendChild(c),r.addEventListener("click",s),r.addEventListener("scroll",s)}))},Kt=function(){kt&&(kt.resolve(""),kt.domList=[])};var xt=d({name:"BasicTree",inheritAttrs:!1,props:{value:{type:Array},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:P.string,toolbar:P.bool,search:P.bool,checkStrictly:P.bool,clickRowToExpand:P.bool.def(!0),checkable:P.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value","change","check"],setup(e,{attrs:t,slots:n,emit:r}){const c=ce({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),i=ce({startSearch:!1,searchData:[]}),d=Q([]),[u]=function(e=!0){return re()&&e&&J((()=>{Kt()})),[Ot,Kt]}(),{prefixCls:h}=le("basic-tree"),f=N((()=>{const{replaceFields:t}=e;return l({children:"children",title:"title",key:"key"},t)})),p=N((()=>{let n=l(l(l({blockNode:!0},t),e),{expandedKeys:c.expandedKeys,selectedKeys:c.selectedKeys,checkedKeys:c.checkedKeys,checkStrictly:c.checkStrictly,replaceFields:Y(f),"onUpdate:expandedKeys":e=>{c.expandedKeys=e,r("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{c.selectedKeys=e,r("update:selectedKeys",e)},onCheck:e=>{c.checkedKeys=e;const t=ae(e);r("change",t),r("check",t),r("update:value",t)},onRightClick:K});return n=oe(n,"treeData","class"),n})),y=N((()=>i.startSearch?i.searchData:Y(d))),b=N((()=>{var e;return i.startSearch&&0===(null==(e=i.searchData)?void 0:e.length)})),{deleteNodeByKey:v,insertNodeByKey:m,filterByLevel:g,updateNodeByKey:k,getAllKeys:O}=function(e,t){return{deleteNodeByKey:function n(r,c){if(!r)return;const l=c||Y(e),{key:a,children:o}=Y(t);if(o&&a)for(let e=0;e<l.length;e++){const t=l[e],c=t[o];if(t[a]===r){l.splice(e,1);break}c&&c.length&&n(r,t[o])}},insertNodeByKey:function({parentKey:n=null,node:r,push:c="push"}){const l=q(Y(e));if(!n)return l[c](r),void(e.value=l);const{key:a,children:o}=Y(t);o&&a&&(W(l,(e=>{e[a]===n&&(e[o]=e[o]||[],e[o][c](r))})),e.value=l)},filterByLevel:function n(r=1,c,l=1){if(!r)return[];const a=[],o=c||Y(e)||[];for(let e=0;e<o.length;e++){const c=o[e],{key:s,children:i}=Y(t),d=s?c[s]:"",u=i?c[i]:[];a.push(d),u&&u.length&&l<r&&(l+=1,a.push(...n(r,u,l)))}return a},updateNodeByKey:function n(r,c,a){if(!r)return;const o=a||Y(e),{key:s,children:i}=Y(t);if(i&&s)for(let e=0;e<o.length;e++){const t=o[e],a=t[i];if(t[s]===r){o[e]=l(l({},o[e]),c);break}a&&a.length&&n(r,c,t[i])}},getAllKeys:function n(r){const c=[],l=r||Y(e),{key:a,children:o}=Y(t);if(!o||!a)return c;for(let e=0;e<l.length;e++){const t=l[e];c.push(t[a]);const r=t[o];r&&r.length&&c.push(...n(r))}return c}}}(d,f);function K(t){return a(this,arguments,(function*({event:t,node:n}){const{rightMenuList:r=[],beforeRightClick:c}=e;let l=[];l=c&&se(c)?yield c(n):r,l.length&&u({event:t,items:l})}))}function x(e){c.expandedKeys=e}function S(e){c.checkedKeys=e?O():[]}function w(e){c.expandedKeys=e?O():[]}function j(e){c.checkStrictly=e}function E(e){if(!e)return void(i.startSearch=!1);i.startSearch=!0;const{title:t}=Y(f);i.searchData=be(Y(d),(n=>{var r,c;return null!=(c=null==(r=n[t])?void 0:r.includes(e))&&c}))}function A(t,n){if(e.clickRowToExpand&&n&&0!==n.length)if(c.expandedKeys.includes(t)){const e=[...c.expandedKeys],n=e.findIndex((e=>e===t));-1!==n&&e.splice(n,1),x(e)}else x([...c.expandedKeys,t])}ie((()=>{d.value=e.treeData})),ie((()=>{c.expandedKeys=e.expandedKeys})),ie((()=>{c.selectedKeys=e.selectedKeys})),ie((()=>{c.checkedKeys=e.checkedKeys})),de((()=>e.value),(()=>{c.checkedKeys=ae(e.value||[])})),ie((()=>{c.checkStrictly=e.checkStrictly}));function C(t){const{actionList:n}=e;if(n&&0!==n.length)return n.map(((e,n)=>{var r;let c=!0;return se(e.show)?c=null==(r=e.show)?void 0:r.call(e,t):me(e.show)&&(c=e.show),c?o("span",{key:n,class:`${h}__action`},[e.render(t)]):null}))}function L({data:t,level:r}){return t?t.map((t=>{const{title:c,key:a,children:i}=Y(f),d=oe(t,"title"),u=function(t,n){return!n&&e.renderIcon&&se(e.renderIcon)?e.renderIcon(t):n}(l(l({},t),{level:r}),t.icon),p=Ee(t,i)||[];return o(Ue.TreeNode,s(d,{node:ae(t),key:Ee(t,a)}),{title:()=>o("span",{class:`${h}-title pl-2`,onClick:A.bind(null,t[a],t[i])},[(null==n?void 0:n.title)?ve(n,"title",t):o(z,null,[u&&o(dt,{icon:u},null),o("span",{class:`${h}__content`},[Ee(t,c)]),o("span",{class:`${h}__actions`},[C(l(l({},t),{level:r}))])])]),default:()=>L({data:p,level:r+1})})})):null}return we({setExpandedKeys:x,getExpandedKeys:function(){return c.expandedKeys},setSelectedKeys:function(e){c.selectedKeys=e},getSelectedKeys:function(){return c.selectedKeys},setCheckedKeys:function(e){c.checkedKeys=e},getCheckedKeys:function(){return c.checkedKeys},insertNodeByKey:m,deleteNodeByKey:v,updateNodeByKey:k,checkAll:S,expandAll:w,filterByLevel:e=>{c.expandedKeys=g(e)}}),()=>{let r;const{title:c,helpMessage:a,toolbar:i,search:d,checkable:u}=e,f=c||i||d||n.headerTitle;return o("div",{class:[h,"h-full bg-white",t.class]},[f&&o(ft,{checkable:u,checkAll:S,expandAll:w,title:c,search:d,toolbar:i,helpMessage:a,onStrictlyChange:j,onSearch:E},(v=r=ue(n),"function"==typeof v||"[object Object]"===Object.prototype.toString.call(v)&&!ee(v)?r:{default:()=>[r]})),he(o(pe,{style:{height:"calc(100% - 38px)"}},{default:()=>[o(Ue,s(Y(p),{showIcon:!1}),l({default:()=>L({data:Y(y),level:1})},ue(n)))]}),[[fe,!Y(b)]]),he(o(ye,{class:"!mt-4"},null),[[fe,Y(b)]])]);var v}}});export{xt as _};
