import{_ as e}from"./PageWrapper.0f991710.js";import{f as s,g as r}from"./useForm.2dff632a.js";import{f as t,aJ as o,P as a}from"./index.36aa7878.js";import{r as i}from"./user.3d56a02b.js";import{j as n,K as d,o as l,m,P as p,n as c,X as u}from"./vendor.0af35baf.js";import"./usePageContext.37d2295e.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.28436c92.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.cfa1e5e1.js";import"./useModal.07fec034.js";import"./useWindowSizeFn.2da1ca2c.js";/* empty css              */import"./download.3cbd7271.js";import"./StrengthMeter.bbf58d9a.js";const f=[{field:"passwordOld",label:"当前密码",component:"InputPassword",required:!0},{field:"passwordNew",label:"新密码",component:"StrengthMeter",componentProps:{placeholder:"新密码"},rules:[{required:!0,message:"请输入新密码"}]},{field:"confirmPassword",label:"确认密码",component:"InputPassword",dynamicRules:({values:e})=>[{required:!0,validator:(s,r)=>r?r!==e.passwordNew?Promise.reject("两次输入的密码不一致!"):Promise.resolve():Promise.reject("不能为空")}]}];var j=n({name:"ChangePassword",components:{BasicForm:s,PageWrapper:e},setup(){const[e,{validate:s,resetFields:n}]=r({size:"large",labelWidth:100,showActionButtonGroup:!1,schemas:f});return{register:e,resetFields:n,handleSubmit:function(){return e=this,r=null,n=function*(){try{const e=t(),r=yield s(),{username:n}=e.getUserInfo||{},{passwordOld:d,passwordNew:l}=r,m={username:n,pwd:d,new_pwd:l};(yield i(m))&&o.push(a.BASE_LOGIN)}catch(e){}},new Promise(((s,t)=>{var o=e=>{try{i(n.next(e))}catch(s){t(s)}},a=e=>{try{i(n.throw(e))}catch(s){t(s)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,a);i((n=n.apply(e,r)).next())}));var e,r,n}}}});const w={class:"py-8 bg-white flex flex-col justify-center items-center"},b={class:"flex justify-center"},x=u(" 重置 "),h=u(" 确认 ");j.render=function(e,s,r,t,o,a){const i=d("BasicForm"),n=d("a-button"),u=d("PageWrapper");return l(),m(u,{title:"修改当前用户密码",content:"修改成功后会自动退出当前登录！"},{default:p((()=>[c("div",w,[c(i,{onRegister:e.register},null,8,["onRegister"]),c("div",b,[c(n,{onClick:e.resetFields},{default:p((()=>[x])),_:1},8,["onClick"]),c(n,{class:"ml-4",type:"primary",onClick:e.handleSubmit},{default:p((()=>[h])),_:1},8,["onClick"])])])])),_:1})};export default j;
