var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,l=(e,t,o)=>new Promise(((a,r)=>{var l=e=>{try{s(o.next(e))}catch(t){r(t)}},n=e=>{try{s(o.throw(e))}catch(t){r(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);s((o=o.apply(e,t)).next())}));import{_ as n,b as s}from"./useModal.dcdf213c.js";import{f as i,g as d}from"./useForm.846cb87f.js";import{a0 as p,bi as c,j as u,r as m,u as f,i as b,K as g,o as v,m as y,P as h,n as P,N as I}from"./vendor.0af35baf.js";/* empty css              */import{g as w,a as j,e as x}from"./dept.b4dec9e8.js";const N=[{title:"部门名称",dataIndex:"deptName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=1==~~e.status,o=t?"启用":"停用";return p(c,{color:t?"green":"red"},(()=>o))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],M=[{field:"deptName",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]},colProps:{span:8}}],O=[{field:"id",label:"ID",component:"InputNumber",show:!1},{field:"pid",label:"pid",component:"InputNumber",show:!1},{field:"deptName",label:"部门名称",component:"Input",required:!0},{field:"parentDept",label:"上级部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"1",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var F=u({name:"DeptModal",components:{BasicModal:n,BasicForm:i},emits:["success","register"],setup(e,{emit:n}){const i=m(!0),[p,{resetFields:c,setFieldsValue:u,updateSchema:g,validate:v}]=d({labelWidth:100,schemas:O,showActionButtonGroup:!1}),[y,{setModalProps:h,closeModal:P}]=s((e=>l(this,null,(function*(){c(),h({confirmLoading:!1}),i.value=!!(null==e?void 0:e.isUpdate),f(i)&&u(((e,l)=>{for(var n in l||(l={}))o.call(l,n)&&r(e,n,l[n]);if(t)for(var n of t(l))a.call(l,n)&&r(e,n,l[n]);return e})({},e.record));const l=(yield w()).items;g({field:"parentDept",componentProps:{treeData:l}})}))));return{registerModal:y,registerForm:p,getTitle:b((()=>f(i)?"编辑部门":"新增部门")),handleSubmit:function(){return l(this,null,(function*(){try{const t=yield v();if(h({confirmLoading:!0}),0!=t.id&&null!=typeof t.id&&t.id)e=yield x(t);else var e=yield j(t);e&&(P(),n("success"))}finally{h({confirmLoading:!1})}}))}}}});F.render=function(e,t,o,a,r,l){const n=g("BasicForm"),s=g("BasicModal");return v(),y(s,I(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:h((()=>[P(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var S=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});export{S as D,F as _,N as c,M as s};
